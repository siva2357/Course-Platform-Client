<p>payment-success works!</p>


<div class="container-fluid">
  <div class="row">

<div class="col-md-12">
  <h5>ðŸ“Š Purchase Summary</h5>

  <!-- Scrollable wrapper -->
  <div style="overflow-x: auto; width: 100%;">
    <table class="table table-bordered table-striped table-sm" style="min-width: 1400px;">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Course Title</th>
          <th>Course ID</th>
          <th>Total Purchased (â‚¹)</th>
          <th>Total Refunded (â‚¹)</th>
          <th>Purchased Count</th>
          <th>Refunded Count</th>
          <th>Order ID</th>
          <th>Payment ID</th>
          <th>Amount (â‚¹)</th>
          <th>Status</th>
          <th>Purchased At</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let course of summaryData; let i = index">
          <ng-container *ngFor="let purchase of course.purchases; let j = index">
            <tr [ngClass]="{ 'table-success': purchase.status === 'purchased', 'table-danger': purchase.status === 'refunded' }">
              <!-- Show course-level summary only on first purchase row -->
              <td *ngIf="j === 0" [attr.rowspan]="course.purchases.length">{{ i + 1 }}</td>
              <td *ngIf="j === 0" [attr.rowspan]="course.purchases.length">{{ course.courseTitle }}</td>
              <td *ngIf="j === 0" [attr.rowspan]="course.purchases.length">{{ course.courseId }}</td>
              <td *ngIf="j === 0" [attr.rowspan]="course.purchases.length">{{ course.totalPurchasedAmount }}</td>
              <td *ngIf="j === 0" [attr.rowspan]="course.purchases.length">{{ course.totalRefundedAmount }}</td>
              <td *ngIf="j === 0" [attr.rowspan]="course.purchases.length">{{ course.purchasedCount }}</td>
              <td *ngIf="j === 0" [attr.rowspan]="course.purchases.length">{{ course.refundedCount }}</td>

              <!-- Always show per-purchase details -->
              <td>{{ purchase.orderId }}</td>
              <td>{{ purchase.paymentId }}</td>
              <td>{{ purchase.amount }}</td>
              <td>{{ purchase.status }}</td>
              <td>{{ purchase.purchasedAt | date: 'medium' }}</td>
            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>




    <!-- Column 2: Purchases for a Course -->
    <div class="col-md-4">
      <h5>ðŸŽ“ Purchases for Course</h5>
      <div *ngFor="let purchase of coursePurchases" class="border p-2 mb-2">
        Title: {{ purchase.courseTitle }}<br>
        Amount: â‚¹{{ purchase.amount }}<br>
        Order ID: {{ purchase.orderId }}<br>
        Payment ID: {{ purchase.paymentId }}<br>
        Status: {{ purchase.status }}<br>
        Date: {{ purchase.purchasedAt | date:'medium' }}
      </div>
    </div>

    <!-- Column 3: Purchase by Order ID -->


  </div>
</div>
