<div class="container pt-5 mt-5">

  <!-- PROFILE CARD -->
  <div class="card overflow-hidden shadow-lg rounded-4">

    <!-- Banner -->
    <div class="w-100"
         style="background-image: url('https://firebasestorage.googleapis.com/v0/b/talent-platform-c6b73.firebasestorage.app/o/Websites%2Fpngtree-modern-design-vibrant-violet-fluid-space-screen-with-rainbow-texture-image_13913957.png?alt=media');
                background-size: cover; background-position: center; height: 150px;">
    </div>

    <!-- Student Identity -->
    <div class="text-center" style="margin-top: -60px;">
      <img [src]="userDetails?.profile?.profileDetails?.profileDetails?.profilePicture?.url || 'assets/default-profile.png'"
           class="rounded-circle shadow border border-4 border-white img-fluid"
           style="width: 120px; height: 120px; object-fit: cover;"
           alt="Student Profile">

      <h5 class="fw-bold mt-3 mb-1 text-truncate px-2">
        {{ userDetails?.profile?.profileDetails?.profileDetails?.fullName }}
      </h5>

      <p class="text-muted fs-6 mb-0">Student</p>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="row mt-4 g-4">

    <!-- LEFT COLUMN -->
    <div class="col-md-5">

      <!-- STUDENT INFO -->
      <div class="card p-3 shadow-sm rounded-4 mb-4">
        <h5 class="fw-bold mb-3">Student Information</h5>
        <div class="mb-2 d-flex justify-content-between">
          <span class="fw-semibold">Full Name</span>
          <span>{{ userDetails?.profile?.profileDetails?.profileDetails?.fullName }}</span>
        </div>
        <div class="mb-2 d-flex justify-content-between">
          <span class="fw-semibold">Email</span>
          <span>{{ userDetails?.profile?.profileDetails?.profileDetails?.email }}</span>
        </div>
        <div class="mb-2 d-flex justify-content-between">
          <span class="fw-semibold">Phone</span>
          <span>{{ userDetails?.profile?.profileDetails?.profileDetails?.phoneNumber || '-' }}</span>
        </div>
        <div class="d-flex justify-content-between">
          <span class="fw-semibold">Location</span>
          <span>{{ userDetails?.profile?.profileDetails?.profileDetails?.location || '-' }}</span>
        </div>
      </div>

      <!-- LANGUAGES -->
      <div class="card p-3 shadow-sm rounded-4 mb-4" *ngIf="userDetails?.profile?.profileDetails?.languages?.length">
        <h5 class="fw-bold mb-3">Languages</h5>
        <div *ngFor="let lang of userDetails.profile.profileDetails.languages" class="d-flex justify-content-between mb-2">
          <span>{{ lang.language }}</span>
          <span class="text-muted">{{ lang.proficiency }}</span>
        </div>
      </div>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="col-md-7">

      <!-- ABOUT STUDENT -->
      <div class="card p-3 shadow-sm rounded-4 mb-4">
        <h5 class="fw-bold mb-3">About the Student</h5>
        <p [innerHTML]="userDetails?.profile?.profileDetails?.profileDetails?.bioDescription || '-'"></p>
      </div>

      <!-- SOCIAL MEDIA -->
      <div class="card p-3 shadow-sm rounded-4 mb-4" *ngIf="userDetails?.profile?.profileDetails?.profileDetails?.socialMedia?.length">
        <h5 class="fw-bold mb-3">Social Media</h5>
        <div *ngFor="let link of userDetails?.profile?.profileDetails?.profileDetails?.socialMedia" class="mb-2">
          <i [class]="getSocialIcon(link.platform) + ' me-2'"></i>
          <a [href]="link.url" target="_blank" class="text-decoration-none">
            {{ link.platform }}
          </a>
        </div>
      </div>

      <!-- PURCHASED COURSES -->
      <div class="card p-3 shadow-sm rounded-4 mb-5" *ngIf="userDetails?.profile?.courses?.length">
        <h5 class="fw-bold mb-3">Purchased Courses</h5>

        <div class="list-group list-group-flush">
          <div class="list-group-item d-flex align-items-center px-2 py-2 border rounded-2 border-secondary mb-2"
               *ngFor="let course of userDetails?.profile?.courses">

            <!-- Thumbnail -->
            <div class="me-3" style="width: 120px; height: 80px; flex-shrink: 0;">
              <img [src]="course.courseThumbnail"
                   alt="{{ course.courseTitle }}"
                   class="w-100 h-100 object-fit-cover rounded" />
            </div>

            <!-- Course Info -->
            <div class="flex-grow-1">
              <div class="fw-semibold">{{ course.courseTitle }}</div>
              <div class="mt-1">
                <small>Purchased: ₹{{ course.purchaseAmount }} on {{ course.purchasedAt | date:'shortDate' }}</small>
              </div>
              <div class="mt-1">
                <small>Progress: {{ course.progressPercentage }}%</small>
                <span *ngIf="course.isCourseCompleted && course.certificateIssued" class="text-success ms-2">| Certificate Issued</span>
                <span *ngIf="course.isCourseCompleted && !course.certificateIssued" class="text-warning ms-2">| Completed</span>
                <span *ngIf="!course.isCourseCompleted" class="text-muted ms-2">| In Progress</span>
              </div>
            </div>

            <!-- Price -->
            <div class="text-end ms-3" style="min-width: 80px;">
              ₹{{ course.purchaseAmount }}
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>
